import pytest
from brownie import accounts, MockTMSignature


@pytest.fixture(scope="module")
def mocktmsignature():
    return accounts[0].deploy(MockTMSignature)


def test_tmsignature_recoversigner_success(mocktmsignature):
    blockHash = "0x8C36C3D12A378BD7E4E8F26BDECCA68B48390240DA456EE9C3292B6E36756AC4"
    signers = mocktmsignature.recoverSigner(
        [
            "0x6916405D52FF02EC26DD78E831E0A179C89B99CBBDB15C9DA802B75A7621D5EB",
            "0x69CF40BE7AC1AA176B13BA4D57EB2B8735A5832014F0DC168EA6F580C51BB222",
            28,
            "0x7808021184C002000000000022480A20",
            "0x12240801122044551F853D916A7C630C0C210C921BAC7D05CE0C249DFC6088C0274F058418272A0C08DE9493850610F0FFAEEB02321362616E642D6C616F7A692D746573746E657431",
        ],
        blockHash,
    )
    assert signers == "0x3b759C4d728e50D5cC04c75f596367829d5b5061"
    signers = mocktmsignature.recoverSigner(
        [
            "0x6A8E3C35DEED991D257BCA9451360BFBE7978D388AF8D2F864A6919FE1083C7E",
            "0x14D145DD6BC1A770ACBDF37DAC08DD8076AB888FDA2739BE9B9767B23A387D1E",
            27,
            "0x7808021184C002000000000022480A20",
            "0x12240801122044551F853D916A7C630C0C210C921BAC7D05CE0C249DFC6088C0274F058418272A0C08DE9493850610DAEB8D9C03321362616E642D6C616F7A692D746573746E657431",
        ],
        blockHash,
    )
    assert signers == "0x49897b9D617AD700b84a935616E81f9f4b5305bc"
    signers = mocktmsignature.recoverSigner(
        [
            "0xEB402F4B863A1DF91E7772D9574640EFFC5447ECEC6EDF6F1CFE2C33D7DC8DD4",
            "0x1FEC45523E885DD6E8AD75EA2D81D30657267DF646406240F206A98749EBD0A7",
            27,
            "0x7808021184C002000000000022480A20",
            "0x12240801122044551F853D916A7C630C0C210C921BAC7D05CE0C249DFC6088C0274F058418272A0C08DE9493850610B68FD4E702321362616E642D6C616F7A692D746573746E657431",
        ],
        blockHash,
    )
    assert signers == "0x7054bd1Fd7535A0DD552361e634196b1574594BB"
