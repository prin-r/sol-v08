import pytest
from brownie import accounts, Bridge, BridgeData, MockBridge

# Returns the POA mainnet validator set
@pytest.fixture(scope="module")
def poa_validator_set():
    return [
        ["0x4705e5935aCb7c6eb23A49b17767e01fB7D8Ab73", "1000001"],
        ["0x1c18c1Ed4ec5d1Dd39b15c26b3346Fc0b4ADb138", "1000001"],
        ["0xa704058b50414C47cb2DFf32929D0830bbcb7f39", "1000001"],
        ["0x03899178B4994a3E8EA88c69b0014FDf71c656C6", "1000001"],
        ["0xeb666C2755AaA9C7e69D6e29f57d8416938c7ee6", "1000001"],
        ["0x975E60E8544bbb2945d6630553C269c5c8E72980", "1000001"],
        ["0x53256a45877e8Cc3A868D53Dc4a4493256a01701", "1000001"],
    ]


# Returns a basic mock validator set
@pytest.fixture(scope="module")
def simple_validator_set():
    return [
        ["0x652D89a66Eb4eA55366c45b1f9ACfc8e2179E1c5", 100],
        ["0x88e1cd00710495EEB93D4f522d16bC8B87Cb00FE", 100],
        ["0xaAA22E077492CbaD414098EBD98AA8dc1C7AE8D9", 100],
        ["0xB956589b6fC5523eeD0d9eEcfF06262Ce84ff260", 100],
    ]


# Returns a valid proof from the VRF oracle script
@pytest.fixture(scope="module")
def valid_proof():
    return "000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000009a000000000000000000000000000000000000000000000000000000000000009400000000000000000000000000000000000000000000000000000000000275a896afed849361d5bd0dee9ac285b1a2de49ae11b9f6e038f6dc15ae95270015decb6f3f2e2ccce1d6567baa57cd5d260c17b5d863e3cac420611f197932c5848e5d44badc2b0427cffda43638c0ee869e7d00736359e3b8a38b9f50b5a601c8ba52b6a7e0f44ed9c179a47a40f93d5824189a5426d6c3f77692de28e50e20a33dd2177e35f9a875ae42e6da558121d0883afb2dcf55ad18f0ccaefafbd1d578d073561783e9c3bdf932a16580fc0c9ceffec4c509073fff65a42871bfab64408aed10d771ec3ec9e56e5378b8747ffa98aedfd509464d906389d128dcc5a0234777e9967eef7dbf4bba769bb22140bb80731b56dbd3fc6f16684180febca07412aea01cd62e714b603323a21a4a7382f8ab04788c867a0c99ade687d00e7d5fe6228d7f126cbeede6f3cbffc04764ad94f006ad306ce38559ab1900be98f9d0ca6fd21a2c2494fe7d09ae1ac5fc1f01b1af1d88f042aaba865f9cce2ba0dd1746700000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000036000000000000000000000000000000000000000000000000000000000000004c00000000000000000000000000000000000000000000000000000000000000620e0250c9d7f31d82554d2d235b5b1649e8e62202f7f74ff9c05f76d53a25fe45f284e220f8663dc671655e99cc4e7becbc67321992c1c1cd2c5ef46f37b8b7b82000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211895a27000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a2084dc54a48b565f9c642338f4e5f9840a94d8386cd080fc8f398afd9c83ad26ff10012a0c08e3a483fd0510add5eaec01320f62616e642d6775616e79752d706f61000000000000000000000000000000000000000000000000000000a10a187adc00bf08117035f05c38ce34818e68058dabeb55780e0fc4483155f75bbada08e31d2b3799f2516ded237f8b0a4bd68343d8864b681f5a5d15f46f08000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211895a27000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a2084dc54a48b565f9c642338f4e5f9840a94d8386cd080fc8f398afd9c83ad26ff10012a0c08e3a483fd0510c7b6979602320f62616e642d6775616e79752d706f610000000000000000000000000000000000000000000000000000006647afcca685f58a0757c80faa4a962f511bb7d44a43fc43413f7e7402979d81758a0ad0ec07be75600eb75d43f13d76d885a1c2fe1fbaff03236d52d13e260f000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211895a27000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a2084dc54a48b565f9c642338f4e5f9840a94d8386cd080fc8f398afd9c83ad26ff10012a0c08e3a483fd0510d289e28402320f62616e642d6775616e79752d706f61000000000000000000000000000000000000000000000000000000d043160c2994bfa781fea354999ec835f0889bad2362c7b0dbc543f3b0634fa86ccbef726944a5cd6229b5d92e8ed038eab982563442e773e8e27a52f1f34745000000000000000000000000000000000000000000000000000000000000001b00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211895a27000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a2084dc54a48b565f9c642338f4e5f9840a94d8386cd080fc8f398afd9c83ad26ff10012a0c08e3a483fd051096e0b18102320f62616e642d6775616e79752d706f6100000000000000000000000000000000000000000000000000000053c10c838f466a5f8f4d8442d9c50efbb0c1deca46a96bdcbcc8a4a2e9f7118b331745e91096941fdae65a70c92160e54f46d66013cfee8c66dcd5b8fd226c09000000000000000000000000000000000000000000000000000000000000001c00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000001074080211895a27000000000022480a2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004512240a2084dc54a48b565f9c642338f4e5f9840a94d8386cd080fc8f398afd9c83ad26ff10012a0c08e3a483fd0510a8ede0f401320f62616e642d6775616e79752d706f6100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000012200000000000000000000000000000000000000000000000000000000000275a8900000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000266b9200000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c62616e64636861696e2e6a730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004e00000042307866383334636661653566363431303062656337343739393930336563623963353139333635643533386431373862303763333562616663633539663766343331000000005f824b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000dfa3a0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000005f9dfac9000000000000000000000000000000000000000000000000000000005f9dfad300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000000c62616e64636861696e2e6a730000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004400000040ccab8c0bc2337a2afdcd487747bfea7bd12b88dfe0f92ed0894621d7dcc1fb861b894f18b2fd39f2e6c6e3b01eb2ec2a7ad5aaa199d9d7f7dd9c0eb56dba8bf30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000266b953a24cc057256a969077592a2435198110f08ac7e3501237999727f9be014acb10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000266b9971eb9b17c6990ab31d6829f311171cc088d2db08aa43ba4e1718d70f6f39faad0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000266b9a394b0cc6ab17e4ee1764b95f1cdb6f69bcba1c85c689621883b59e55c17441280000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000266bb4819138fe036c7e93dc855fb3fdb1dc6f2029a03923977837c26b868cd15b95040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000266be5360c66005d9c7154907510f992b94e3133d79500e21facc539f7a0e5b421709a0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000266bf66ca86bee3c008ae3f63c1b4d08300aaf750ed2d3ee8c459c6cc4721562fb03720000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000266c4015f4c2368fabb5ea23be5afd902f0b5d718368774bd4801b61e13a2818eaf54b0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000266ca723bd9663e512f867b0e30b6b4700e532be48fd086b7fb897732dca02d0cba3170000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000900000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000266f28e556cdc465b8f448dd512c767d8a105aa1729fcc0f2d5632946a5c288340afe80000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000002670ecd34838b7f6e1688db30e82c18689019ef1f5f0ef12d0b7e722f47dfa1af237b20000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000026745771660015f2b31c7498e228225fa560d5fab0ccd7e02fe50dc487afbd8a8fae8f0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000267b15f3eec708431b0ec9753529682236d7100f443f6dc9f8c3947104feece3838a410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000001fff000000000000000000000000000000000000000000000000000000000026a3e975a08c9b413f3781f19ab65f51927e77c83d9b2eb2c0e68b5e5753ce9a5a6a680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000003ffd000000000000000000000000000000000000000000000000000000000026f5952398774747479618fbb73f0f5fed0287dfd8a5c8215242fca8fedacccf7c0b21000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000009b8b0000000000000000000000000000000000000000000000000000000000275a881791d6620cd32f4d7a5f93414af973f2a003d1608677d9565c8aaa22d18504e1000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000019b7e0000000000000000000000000000000000000000000000000000000000275a88be807a2bd16ef843624c39fe1fb04f945106371843b6413ff4a705713763dd7c000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000029b750000000000000000000000000000000000000000000000000000000000275a88fa9164577f938a3348058303777beb047f9af2c0a7e6fc31024f02aaa03b7fec00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000006994f0000000000000000000000000000000000000000000000000000000000275a8892239dae8cc9f9df63296cf335470d70e6bcf12729a47a3034c1b4d0669a62710000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000e873f0000000000000000000000000000000000000000000000000000000000275a88e1134a31efe6f66767acff264c3b42db23efc3095256f0d6721dcd3804fddb390000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000001500000000000000000000000000000000000000000000000000000000001b57250000000000000000000000000000000000000000000000000000000000275a8885883ee84a3aed04b8f817fc307b6f06379d11e7437c4cadd67e3ab71811704100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000032643a0000000000000000000000000000000000000000000000000000000000275a88a2319485068682af4ea04de56f901c7b07ca2c85978700977cbf39f955bb020a00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000017000000000000000000000000000000000000000000000000000000000048cce80000000000000000000000000000000000000000000000000000000000275a882061c39b5fc169f7309e60769aed51611d503cf670c5eaff0082e343cdcee61300000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000057e7430000000000000000000000000000000000000000000000000000000000275a885c9edb57a608a5bdd8fa8189ffb2b59bc902120586c7e07eb7c777a55e792528"


# Deploy Bridge contract with POA mainnet validator set
@pytest.fixture(scope="module")
def bridge(poa_validator_set):
    return accounts[0].deploy(Bridge, poa_validator_set)


# Deploy Bridge contract with simple validator set
@pytest.fixture(scope="module")
def simplebridge(simple_validator_set):
    return accounts[0].deploy(Bridge, simple_validator_set)


# Deploy MockBridge contract with simple validator set
@pytest.fixture(scope="module")
def mockbridge(simple_validator_set):
    return accounts[0].deploy(MockBridge, simple_validator_set)


# Deploy BridgeData contract
@pytest.fixture(scope="module")
def bridgeinfo(bridge):
    return accounts[0].deploy(BridgeData, bridge.address)


@pytest.fixture(scope="module")
def bridgeinfo_relayed(bridgeinfo, valid_proof):
    bridgeinfo.relayAndSave(valid_proof, {"from": accounts[0]})
    return bridgeinfo
